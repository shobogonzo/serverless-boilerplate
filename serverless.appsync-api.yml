name: ${self:custom.name}-entity-api-${self:custom.stage}
schema: schema.api.graphql
authentication:
  type: AMAZON_COGNITO_USER_POOLS
  config:
    awsRegion: us-east-1
    defaultAction: ALLOW
    userPoolId: !Ref UserPool
logging:
  level: ERROR
  retentionInDays: 14

resolvers:
  Query.getEntity:
    kind: UNIT
    dataSource: shoboTable
    code: resolvers/entities/get-entity.js
  Query.getEntities:
    kind: UNIT
    dataSource: shoboTable
    code: resolvers/entities/get-entities.js
  Mutation.createEntity:
    kind: UNIT
    dataSource: shoboTable
    code: resolvers/entities/create-entity.js
  Query.getMyProfile:
    kind: UNIT
    dataSource: shoboTable
    code: resolvers/user-profiles/get-my-profile.js

dataSources:
  shoboTable:
    type: AMAZON_DYNAMODB
    description: 'Shobo entities table'
    name: shoboTable
    config:
      tableName: !Ref ShoboTable
